#%Module1.0#####################################################################
##
## uemep modulefile


set appname   "uemep"
set release   202011
set apphome   /modules/xenial/user-apps
set appurl    https://github.com/metno/uEMEP

proc ModulesDisplay {} {
  global appname release apphome

  puts stderr "\nLoads $appname version $release"
}

proc ModulesHelp { } {
  global appname appurl modulefile apphome release

  puts stderr "The $appname modulefile defines the default system paths and"
  puts stderr "environment variables needed to use $appname release $release.\n"
  puts stderr "Documentation on $appurl.\n"
}

module-whatis   "Setup for $appname local fraction clculations"

#odule purge
module load compiler/intelPE2018
module load netcdf/4.5.0intel18

# storeA/B from environment
if { [info exists ::env(STORE)] } {
  set lustre            $::env(STORE)
} else {
  set lustre            /lustre/storeB
}
set root                $apphome/$appname/$release
set data                $lustre/project/fou/kl/emep/ModelRuns
set meps                $lustre/project/metproduction/products/meps
set type                40to5km

prepend-path PATH       $root/bin
append-path  PYTHONPATH $root/lib/python3.5/site-packages

setenv HDF5_USE_FILE_LOCKING FALSE

setenv uEMEP_VERSION    $release
setenv uEMEP_DATA       $data
setenv uEMEP_INPUT      $root/share/data
setenv uEMEP_MEPS       $meps
setenv uEMEP_METEO      $data/NORTRIP/Forecast_2020/NORTRIP_in/meps

setenv uEMEP_CONFIG     $root/share/uEMEP_%s.txt
setenv uEMEP_TILE_DEF   $root/share/uEMEP_tile_$type.txt
setenv uEMEP_TILE_TAG   $type\_%05d
setenv uEMEP_DATE_PATH  %Y/%m/%d/%H
setenv uEMEP_OUTPUT     $data/uEMEP/%Y/%m/%d/%H/uEMEP_Norway_%%s_%Y%m%d_%H.nc
setenv uEMEP_EMISS      $data/EMEP4NO/uEMEP_emissions_for_EMEP_v4/uEMEP_emission_for_EMEP_Norway_%%s_all_sand_salt_%Y%m%d_%H.nc
setenv uEMEP_WMTSHOSTS  157.249.178.160,157.249.176.99
